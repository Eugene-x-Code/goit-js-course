"use strict";var form=document.querySelector(".js-form"),input=document.querySelector(".js-input"),bookMarks=document.querySelector(".list"),sourse=document.querySelector(".bookmark-tpl").innerHTML.trim(),template=Handlebars.compile(sourse),urls=[];function allUrls(e){var t=e.reduce(function(e,t){return e+template(t)},"");bookMarks.innerHTML=t}function checkValidUrl(t){var e=/(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/.test(t),r=urls.some(function(e){return e.url===t});if(!e||r)return r?alert("URL already exist!"):alert("Ivalid URL!");fetch("http://api.linkpreview.net/?key=5d186a9733a915fec640a1bd24b0c4ff1f9ab2ebd6493&q=".concat(t)).then(function(e){if(e.ok)return e.json();throw new Error("Error"+e.statusText)}).then(function(e){urls.unshift({url:e.url,img:e.image}),allUrls(urls),set()}).catch(function(e){return console.log("Error: "+e)})}function set(){localStorage.setItem("fetchTags",JSON.stringify(urls))}function get(){var e=localStorage.getItem("fetchTags"),t=JSON.parse(e);if(null!==t)return t}function updateLocMas(){if(localStorage.getItem("fetchTags")){var e=JSON.parse(localStorage.getItem("fetchTags"));urls=e}}function handleDel(e){var t=e.target;"BUTTON"===t.nodeName&&(console.log(urls),allUrls(urls=urls.filter(function(e){return t.previousElementSibling.innerHTML!=e.url})),set())}form.addEventListener("submit",function(e){e.preventDefault(),console.log(input.value),checkValidUrl(input.value),allUrls(urls),set()}),bookMarks.addEventListener("click",handleDel),updateLocMas(),allUrls(get()),console.log(urls);